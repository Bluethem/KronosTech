# Requerimientos Funcionales

## RF-001: Gestión de Usuarios

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|-------|------------------|---------------|-----------|
| RF-001.1 | El sistema debe permitir registro de nuevos usuarios con email y contraseña | Alta | Usuario |
| RF-001.2 | El sistema debe permitir inicio de sesión con email y contraseña | Alta | Usuario |
| RF-001.3 | El sistema debe permitir recuperación de contraseña vía email | Media | Usuario |
| RF-001.4 | El sistema debe permitir edición de perfil (nombre, teléfono, DNI) | Media | Cliente |
| RF-001.5 | El sistema debe permitir gestión de múltiples direcciones de envío | Media | Cliente |
| RF-001.6 | El sistema debe diferenciar roles: Cliente, Administrador, Super Admin | Alta | Sistema |
| RF-001.7 | El sistema debe mantener historial de compras del cliente | Alta | Cliente |
| RF-001.8 | El sistema debe cerrar sesión automáticamente después de 30 min de inactividad | Baja | Sistema |

---

## RF-002: Catálogo de Productos

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-002.1 | El sistema debe mostrar productos organizados por Familia → Categoría → Subcategoría | Alta | Usuario |
| RF-002.2 | El sistema debe mostrar información detallada del producto (specs, imágenes, precio, stock) | Alta | Usuario |
| RF-002.3 | El sistema debe permitir búsqueda por nombre, marca, categoría | Alta | Usuario |
| RF-002.4 | El sistema debe permitir filtrado por rango de precio, marca, disponibilidad | Media | Usuario |
| RF-002.5 | El sistema debe permitir ordenamiento (precio, popularidad, valoración, más nuevo) | Media | Usuario |
| RF-002.6 | El sistema debe mostrar productos relacionados/similares | Baja | Usuario |
| RF-002.7 | El sistema debe mostrar badges: "Nuevo", "Oferta", "Destacado" | Baja | Usuario |
| RF-002.8 | El sistema debe indicar claramente si un producto está sin stock | Alta | Usuario |
| RF-002.9 | El sistema debe mostrar múltiples imágenes del producto | Media | Usuario |
| RF-002.10 | El sistema debe mostrar valoraciones y reviews de clientes | Media | Usuario |

---

## RF-003: Carrito de Compras

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-003.1 | El sistema debe permitir agregar productos al carrito | Alta | Usuario |
| RF-003.2 | El sistema debe validar stock disponible al agregar al carrito | Alta | Sistema |
| RF-003.3 | El sistema debe permitir modificar cantidad de productos en el carrito | Alta | Usuario |
| RF-003.4 | El sistema debe permitir eliminar productos del carrito | Alta | Usuario |
| RF-003.5 | El sistema debe calcular subtotal, descuentos y total en tiempo real | Alta | Sistema |
| RF-003.6 | El sistema debe mantener carrito de usuarios no registrados por 7 días | Media | Sistema |
| RF-003.7 | El sistema debe migrar carrito de sesión anónima a usuario al registrarse | Media | Sistema |
| RF-003.8 | El sistema debe notificar si un producto en el carrito ya no tiene stock | Alta | Sistema |
| RF-003.9 | El sistema debe notificar si el precio de un producto cambió | Media | Sistema |
| RF-003.10 | El sistema debe mostrar el ahorro total por descuentos aplicados | Baja | Usuario |

---

## RF-004: Descuentos y Cupones

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-004.1 | El sistema debe aplicar descuentos configurados a productos específicos | Alta | Sistema |
| RF-004.2 | El sistema debe permitir descuentos por categoría/marca | Media | Admin |
| RF-004.3 | El sistema debe permitir cupones de descuento con código | Alta | Cliente |
| RF-004.4 | El sistema debe validar vigencia de cupones (fecha inicio/fin) | Alta | Sistema |
| RF-004.5 | El sistema debe validar uso máximo de cupones (global y por usuario) | Alta | Sistema |
| RF-004.6 | El sistema debe validar compra mínima para aplicar cupón | Media | Sistema |
| RF-004.7 | El sistema debe permitir cupones de envío gratis | Media | Cliente |
| RF-004.8 | El sistema debe mostrar descuentos aplicados de forma clara en checkout | Alta | Usuario |
| RF-004.9 | El sistema debe permitir solo un cupón por compra | Media | Sistema |
| RF-004.10 | El sistema debe acumular descuentos de producto + cupón | Media | Sistema |

---

## RF-005: Proceso de Compra (Checkout)

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-005.1 | El sistema debe validar stock antes de procesar el pago | Crítica | Sistema |
| RF-005.2 | El sistema debe solicitar dirección de envío | Alta | Cliente |
| RF-005.3 | El sistema debe calcular costo de envío según dirección | Media | Sistema |
| RF-005.4 | El sistema debe permitir selección de método de pago | Alta | Cliente |
| RF-005.5 | El sistema debe generar número de pedido único | Alta | Sistema |
| RF-005.6 | El sistema debe enviar email de confirmación de pedido | Alta | Sistema |
| RF-005.7 | El sistema debe bloquear stock al confirmar pedido | Crítica | Sistema |
| RF-005.8 | El sistema debe registrar IP y user-agent por seguridad | Media | Sistema |
| RF-005.9 | El sistema debe permitir agregar notas/comentarios al pedido | Baja | Cliente |
| RF-005.10 | El sistema debe mostrar resumen completo antes de confirmar | Alta | Cliente |

---

## RF-006: Gestión de Pagos

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-006.1 | El sistema debe integrar pasarela de pagos (Stripe/PayPal/Culqi) | Crítica | Sistema |
| RF-006.2 | El sistema debe tokenizar datos de tarjeta | Crítica | Sistema |
| RF-006.3 | El sistema debe soportar tarjetas de crédito/débito | Alta | Cliente |
| RF-006.4 | El sistema debe soportar billeteras digitales (Yape, Plin) | Media | Cliente |
| RF-006.5 | El sistema debe soportar transferencia bancaria | Media | Cliente |
| RF-006.6 | El sistema debe permitir pago contra reembolso | Baja | Cliente |
| RF-006.7 | El sistema debe actualizar estado del pedido al confirmar pago | Crítica | Sistema |
| RF-006.8 | El sistema debe manejar pagos fallidos y permitir reintento | Alta | Sistema |
| RF-006.9 | El sistema debe registrar comisiones de métodos de pago | Media | Sistema |
| RF-006.10 | El sistema debe generar comprobante/factura electrónica | Alta | Sistema |

---

## RF-007: Gestión de Pedidos (Clientes)

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-007.1 | El sistema debe permitir ver historial de pedidos | Alta | Cliente |
| RF-007.2 | El sistema debe permitir ver detalle de cada pedido | Alta | Cliente |
| RF-007.3 | El sistema debe mostrar estado actual del pedido en tiempo real | Alta | Cliente |
| RF-007.4 | El sistema debe permitir tracking de envío | Media | Cliente |
| RF-007.5 | El sistema debe permitir cancelar pedido (si no ha sido enviado) | Media | Cliente |
| RF-007.6 | El sistema debe permitir solicitar devolución | Media | Cliente |
| RF-007.7 | El sistema debe permitir descargar factura/comprobante | Alta | Cliente |
| RF-007.8 | El sistema debe enviar notificaciones de cambio de estado | Media | Cliente |
| RF-007.9 | El sistema debe permitir repetir pedidos anteriores | Baja | Cliente |

---

## RF-008: Gestión de Pedidos (Admin)

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-008.1 | El sistema debe permitir ver todos los pedidos con filtros | Alta | Admin |
| RF-008.2 | El sistema debe permitir cambiar estado de pedido | Alta | Admin |
| RF-008.3 | El sistema debe permitir asignar número de tracking | Alta | Admin |
| RF-008.4 | El sistema debe permitir ver detalle completo del pedido | Alta | Admin |
| RF-008.5 | El sistema debe permitir cancelar pedidos | Media | Admin |
| RF-008.6 | El sistema debe permitir procesar reembolsos | Media | Admin |
| RF-008.7 | El sistema debe generar reportes de ventas | Alta | Admin |
| RF-008.8 | El sistema debe permitir agregar notas internas al pedido | Media | Admin |
| RF-008.9 | El sistema debe alertar pedidos pendientes > 24 horas | Media | Admin |

---

## RF-009: Gestión de Inventario

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-009.1 | El sistema debe actualizar stock automáticamente al venderse | Crítica | Sistema |
| RF-009.2 | El sistema debe permitir ajustes manuales de inventario | Alta | Admin |
| RF-009.3 | El sistema debe alertar cuando stock < cantidad_minima | Alta | Admin |
| RF-009.4 | El sistema debe registrar historial de movimientos de inventario | Alta | Sistema |
| RF-009.5 | El sistema debe permitir entradas de stock con lote/fecha | Media | Admin |
| RF-009.6 | El sistema debe devolver stock si se cancela un pedido | Alta | Sistema |
| RF-009.7 | El sistema debe manejar devoluciones y agregar stock | Media | Admin |
| RF-009.8 | El sistema debe permitir búsqueda de productos por SKU | Media | Admin |
| RF-009.9 | El sistema debe generar reportes de inventario | Media | Admin |

---

## RF-010: Gestión de Productos (Admin)

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-010.1 | El sistema debe permitir crear nuevos productos | Alta | Admin |
| RF-010.2 | El sistema debe permitir editar productos existentes | Alta | Admin |
| RF-010.3 | El sistema debe permitir desactivar/activar productos | Alta | Admin |
| RF-010.4 | El sistema debe permitir subir múltiples imágenes | Media | Admin |
| RF-010.5 | El sistema debe permitir gestionar especificaciones dinámicas (JSON) | Media | Admin |
| RF-010.6 | El sistema debe permitir asignar categorías y marcas | Alta | Admin |
| RF-010.7 | El sistema debe permitir configurar descuentos | Media | Admin |
| RF-010.8 | El sistema debe permitir importar productos masivamente (CSV) | Baja | Admin |
| RF-010.9 | El sistema debe validar SKU único | Alta | Sistema |

---

## RF-011: Valoraciones y Reviews

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-011.1 | El sistema debe permitir valorar productos (1-5 estrellas) | Media | Cliente |
| RF-011.2 | El sistema debe permitir escribir reviews | Media | Cliente |
| RF-011.3 | El sistema debe verificar compra antes de permitir review | Media | Sistema |
| RF-011.4 | El sistema debe calcular valoración promedio automáticamente | Media | Sistema |
| RF-011.5 | El sistema debe permitir votar reviews como útiles | Baja | Usuario |
| RF-011.6 | El sistema debe permitir moderar reviews | Baja | Admin |
| RF-011.7 | El sistema debe mostrar reviews más útiles primero | Baja | Usuario |
| RF-011.8 | El sistema debe permitir subir fotos en reviews | Baja | Cliente |

---

## RF-012: Notificaciones

| **ID** | **Descripción** | **Prioridad** | **Actor** |
|--------|------------------|---------------|-----------|
| RF-012.1 | El sistema debe enviar email de confirmación de registro | Alta | Sistema |
| RF-012.2 | El sistema debe enviar email de confirmación de pedido | Alta | Sistema |
| RF-012.3 | El sistema debe enviar email cuando pedido cambie de estado | Media | Sistema |
| RF-012.4 | El sistema debe enviar email de tracking cuando se envíe | Media | Sistema |
| RF-012.5 | El sistema debe enviar email de producto entregado | Media | Sistema |
| RF-012.6 | El sistema debe notificar productos sin stock en carrito | Alta | Sistema |
| RF-012.7 | El sistema debe notificar cambios de precio en productos guardados | Baja | Sistema |

---